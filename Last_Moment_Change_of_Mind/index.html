<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Last Moment Change of Mind - Dr. Hamed Ghane</title>
<link rel="stylesheet" href="../assets/style.css" />
<meta name="description" content="Hardware-synchronized closed-loop EMG-EEG BCI system for detecting and responding to last-moment decision changes." />
<style>
.hero-video-container {
    text-align: center;
    margin: 30px 0;
    position: relative;
    /* Added padding to ensure the video isn't cut off */
    padding-bottom: 10px;
    /* Ensuring there's no overflow hidden */
    overflow: visible;
}

.hero-video {
    max-width: 900px;
    width: 100%;
    height: auto;
    /* Adjusted border radius to be slightly less pronounced */
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    background-color: #f0f0f0; /* Placeholder background while video loads */
    cursor: pointer; /* Indicates it's clickable for manual play */
    /* Ensuring there's no overflow hidden on the video element */
    overflow: visible;
    /* Remove any potential constraints */
    object-fit: contain;
    /* Add some bottom margin to prevent cutoff */
    margin-bottom: 5px;
}

/* Show a play button overlay to help with autoplay issues */
.play-button-overlay {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80px;
    height: 80px;
    background-color: rgba(255,255,255,0.7);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    z-index: 10;
}

.play-button-overlay svg {
    width: 40px;
    height: 40px;
    fill: #4a89dc;
}

.fallback-image {
    display: none; /* Only shown if video fails to load */
    max-width: 900px;
    width: 100%;
    height: auto;
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
}

.diagram-container {
    text-align: center;
    margin: 40px 0;
    padding: 30px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

.diagram-container img {
    max-width: 900px;
    width: 100%;
    height: auto;
    border-radius: 8px;
}

.diagram-container figcaption {
    margin-top: 16px;
    font-style: italic;
    color: var(--muted);
    font-size: 0.95rem;
}

.status-badge {
    display: inline-block;
    padding: 6px 14px;
    background: linear-gradient(90deg, rgba(33,150,243,1), rgba(3,169,244,1));
    color: white;
    font-weight: 700;
    font-size: 0.8rem;
    border-radius: 30px;
    margin-bottom: 16px;
    box-shadow: 0 4px 12px rgba(3,169,244,0.3);
}

.hero-sub {
    /* Improved text color for better contrast */
    color: #2a4365 !important;
    font-weight: 500;
    font-size: 1.1rem;
    max-width: 800px;
    margin: 0 auto 30px;
}

/* Custom hero background with gradient for better contrast */
.custom-hero {
    background: linear-gradient(135deg, #e6f1ff 0%, #f0f9ff 100%);
    padding: 60px 0;
    border-radius: 0 0 30px 30px;
    /* Ensure no overflow constraints */
    overflow: visible;
}

/* Additional info box */
.system-info {
    background: white;
    border-radius: 12px;
    padding: 24px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    margin-top: 40px; /* Increased from 30px to allow more room for video */
    text-align: left;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
}

.system-info h4 {
    color: var(--accent);
    margin-top: 0;
    font-size: 1.1rem;
}

/* Container to ensure full content is visible */
.container {
    overflow: visible;
}
</style>
</head>
<body>
<header class="site-header">
<div class="container header-wrap">
<div class="brand">
<a href="../" class="btn btn-secondary">← Home</a>
<div>
<h1>Last Moment Change of Mind</h1>
<p class="tag">Real-time EMG-EEG BCI System</p>
</div>
</div>
</div>
</header>

<main>
<!-- Hero Section -->
<section class="custom-hero">
<div class="container">
<div class="hero-content" style="text-align: center;">
<div class="status-badge">In Progress</div>
<h2 class="hero-title" style="background: linear-gradient(90deg, #4a89dc, #79e7d7); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-size: 2.8rem;">Finding the "Point of No Return"</h2>
<p class="hero-sub">When is a decision truly committed? This hardware-optimized closed-loop BCI system investigates the critical threshold between decision initiation and irreversible commitment.</p>

<!-- Video replaces static image - with play button overlay -->
<div class="hero-video-container">
    <!-- Play button overlay -->
    <div class="play-button-overlay" id="play-button">
        <svg viewBox="0 0 24 24">
            <path d="M8 5v14l11-7z"/>
        </svg>
    </div>
    
    <!-- Video element -->
    <video id="hero-video" class="hero-video" muted playsinline poster="experiment-design.png">
        <source src="experiment-animation.mp4" type="video/mp4">
        <!-- Fallback text if video not supported -->
        Your browser does not support the video tag.
    </video>
    
    <!-- Fallback image shown if video fails -->
    <img src="experiment-design.png" alt="Last Moment Change of Mind Experimental Design" class="fallback-image" id="fallback-image">
</div>

<!-- Added system architecture explanation -->
<div class="system-info">
<h4>Closed-Loop System Architecture</h4>
<p>The experiment runs on a dual-PC setup for optimal performance. The task PC presents the random dot motion stimulus and handles participant responses, while the detector PC continuously monitors EMG signals for movement onset. When EMG onset is detected, a trigger is sent via hardware-synchronized connections to modify the visual stimulus with sub-millisecond precision. This closed-loop architecture enables us to probe exactly when actions become irreversible.</p>
</div>
</div>
</div>
</section>

<!-- Main Content Section -->
<section class="container section">
<div class="columns">
<div class="box">
<h4>Research Question</h4>
<p>When does a motor action become irreversible after initial motor preparation begins? Our experiment determines the exact timing of the "point of no return" in decision-making.</p>
</div>

<div class="box">
<h4>Methodology</h4>
<p>Participants perform a dot-motion task while EMG activity is monitored. When muscle activity is detected, visual evidence changes after variable delays to test if actions can still be cancelled.</p>
</div>

<div class="box">
<h4>Technical Innovation</h4>
<p>Hardware-synchronized parallel port timing ensures sub-millisecond precision, allowing us to pinpoint exactly when actions become committed.</p>
</div>
</div>
</section>
</main>

<footer class="site-footer">
<div class="container">
<p>© <span id="y"></span> Dr. Hamed Ghane · University of Glasgow · Research Scientist (Neurotech)</p>
</div>
</footer>

<!-- Improved video handling script -->
<script>
document.getElementById('y').textContent = new Date().getFullYear();

// Video control with 10-second pause at the end
document.addEventListener('DOMContentLoaded', function() {
    const video = document.getElementById('hero-video');
    const fallbackImage = document.getElementById('fallback-image');
    const playButton = document.getElementById('play-button');
    
    // Function to handle video playback with 10-second pause at end
    function playWithPause() {
        // Hide play button when video starts
        playButton.style.display = 'none';
        
        // Start playing
        video.play().catch(function(error) {
            // Show play button if autoplay fails
            playButton.style.display = 'flex';
            console.error('Video autoplay failed:', error);
        });
        
        // Ensure video is visible
        video.style.display = 'block';
        fallbackImage.style.display = 'none';
    }
    
    // Click on play button to start video
    playButton.addEventListener('click', playWithPause);
    
    // Click on video to start/pause
    video.addEventListener('click', function() {
        if (video.paused) {
            playWithPause();
        } else {
            video.pause();
            playButton.style.display = 'flex';
        }
    });
    
    // Handle video error - show fallback image instead
    video.addEventListener('error', function(e) {
        video.style.display = 'none';
        fallbackImage.style.display = 'block';
        playButton.style.display = 'none';
        console.error('Video failed to load:', e);
    });
    
    // Handle video ending - pause for 10 seconds at final frame
    video.addEventListener('ended', function() {
        // Pause at the last frame
        video.pause();
        
        // Wait 10 seconds then restart
        setTimeout(function() {
            // Reset to beginning and play again
            video.currentTime = 0;
            playWithPause();
        }, 10000); // 10 seconds in milliseconds
    });
    
    // Try to start playing video automatically
    playWithPause();
});
</script>
</body>
</html>
